@page "/"
@inject IRepository repository


<div>
    <h3>Movies</h3>
    <MoviesList Movies="_movies" />
</div>

<CustomTypehead SearchMethod="SearchMethod">
    <ResultTemplate>
        @context
    </ResultTemplate>
</CustomTypehead>
@code
{
    private List<Movie> _movies;

    protected async override Task OnInitializedAsync()
    {

        _movies = repository.GetMovies();

    }

    private async Task<IEnumerable<string>> SearchMethod(string searchText)
    {
        await Task.Delay(2000);
        if (searchText == "test")
        {
            return Enumerable.Empty<string>();
        }

        return new List<string>() {"John Doe", "Dummy Movie"};
    }
}
